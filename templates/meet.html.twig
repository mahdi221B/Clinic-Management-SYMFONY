<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,200,300,regular,500,600,700,800,900,100italic,200italic,300italic,italic,500italic,600italic,700italic,800italic,900italic" rel="stylesheet" />
    <title></title>

</head>
<body>
<div class="errorsSide">
</div>
<div class="shareLink">
    <div class="welcomeMess" style="margin-top: 0;">
        <div class="img"><video src="https://res.cloudinary.com/duw2s4w0s/video/upload/v1620962563/HO%20TV%20assets/ezgif-6-38fc0e6aefa8_owq33f.mp4" alt="brainstorm video" autoplay muted></video></div>
        <h1 class="roomTitle" class="roomTitle">Error Pharsing</h1>
        <p id="copyLinker2" class="copyLinker2">#4987720</p>
    </div>
    <input id="copyvalue" type="text" value="#4987720">
    <button id="copyLinker">Copy Code</button>
</div>
<div class="nameAlert"><h1>Enter your Name</h1><input id="name" type="text" placeholder="Enter your Name"></div>

<div class="mainChater">
    <div class="headerDet">
        <div class="chatDety">
            <div class="img"><video src="https://res.cloudinary.com/duw2s4w0s/video/upload/v1620962563/HO%20TV%20assets/ezgif-6-38fc0e6aefa8_owq33f.mp4" alt="brainstorm video" autoplay></video></div>
            <div class="nameC">
                <p class="roomTitle" id='titleFirst' class="roomTitle">Error Pharsing</p>
                <input type="text" name="room name" id="roomNameInput" class="roomTitle" value="Its BrainStorming">
            </div>
        </div>

        <div class="tools">
            <button id="groupEdit" tooltip="Google Meet" flow="left"><span class="material-icons blueClick">mode_edit</span></button>
            <button id="settings" tooltip="Room Settings" flow="left"><span class="material-icons blueClick">settings</span></button>
        </div>
    </div>

    <div class="blackout"></div>

    <div class="chatArea changeW">
        <div class="chatMessages">
            <!--Start of Chat cont-->
            <div class="welcomeMess">
                <div class="img"><video src="https://res.cloudinary.com/duw2s4w0s/video/upload/v1620962563/HO%20TV%20assets/ezgif-6-38fc0e6aefa8_owq33f.mp4" alt="brainstorm video" autoplay></video></div>
                <h1 class="roomTitle">Error Pharsing</h1>
                <p id="copyLinker2" class="copyLinker2">#40</p>
            </div>

            <div class="message"><div class="prof"><p>L</p></div>
                <div class="messArea">
                    <p id="sname">Lance Francisco | Team Poster</p>
                    <div class="textM">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque quasi quas aliquam commodi quaerat sit reiciendis dignissimos quam totam nemo.</div>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
            </div>

            <div class="message mMess 1122334" data-number="1122334">
                <div class="messArea">
                    <p id="sname">James Ericson</p>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
                <div class="prof" style="background-color: #ff7b54;"><p>J</p></div>
            </div>

            <div class="message"><div class="prof" style="background-color: #939b62;"><p>M</p></div>
                <div class="messArea">
                    <p id="sname">Marcus Dilinmer</p>
                    <div class="textM">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque quasi quas aliquam commodi quaerat sit reiciendis dignissimos quam totam nemo.</div>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
            </div>

            <div class="message"><div class="prof" style="background-color: #ffb26b;"><p>A</p></div>
                <div class="messArea">
                    <p id="sname">Alexandria Patkinson</p>
                    <div class="textM">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque quasi quas aliquam commodi quaerat sit reiciendis dignissimos quam totam nemo.</div>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
            </div>

            <div class="message"><div class="prof"><p>L</p></div>
                <div class="messArea">
                    <p id="sname">Lance Francisco</p>
                    <div class="textM">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque quasi quas aliquam commodi quaerat sit reiciendis dignissimos quam totam nemo.</div>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
            </div>

            <div class="message mMess 1122334" data-number="1122334">
                <div class="messArea">
                    <p id="sname">James Ericson</p>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
                <div class="prof" style="background-color: #ff7b54;"><p>J</p></div>
            </div>

            <div class="message"><div class="prof" style="background-color: #939b62;"><p>M</p></div>
                <div class="messArea">
                    <p id="sname">Marcus Dilinmer</p>
                    <div class="textM">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque quasi quas aliquam commodi quaerat sit reiciendis dignissimos quam totam nemo.</div>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
            </div>

            <div class="message"><div class="prof" style="background-color: #ffb26b;"><p>A</p></div>
                <div class="messArea">
                    <p id="sname">Alexandria Patkinson</p>
                    <div class="textM">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque quasi quas aliquam commodi quaerat sit reiciendis dignissimos quam totam nemo.</div>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
            </div>

            <div class="message"><div class="prof"><p>L</p></div>
                <div class="messArea">
                    <p id="sname">Lance Francisco</p>
                    <div class="textM">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque quasi quas aliquam commodi quaerat sit reiciendis dignissimos quam totam nemo.</div>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. https://mi.com. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
            </div>
            <p class="timeId">8:43pm | 12/05/2021</p>
            <div class="message mMess 1122334" data-number="1122334">
                <div class="messArea">
                    <p id="sname">James Ericson</p>
                    <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
                <div class="prof" style="background-color: #ff7b54;"><p>J</p></div>
            </div>
            <!--End of Chat cont-->
        </div>

        <div class="messageBox">
            <button id="genMeetLink" class=" button-s1" tooltip="Google Docs" flow="right"><a href="https://docs.google.com/document/u/0/create" target="blank"><span class="material-icons">description</span></a></button>
            <button id="genMeetLink" class=" button-s1" tooltip="Google Meet" flow="right"><a href="https://meet.google.com/new" target="blank"><span class="material-icons">video_call</span></a></button>
            <button id="linkCopy" class="button-s1" tooltip="Copy Link" flow="up"><span class="material-icons">link</span></button>
            <div class="textA"><textarea id="message" name="message" rows="1" cols="30" placeholder="Type your message here"></textarea></div>
            <button id="send" class="button-s1" tooltip="Send" flow="left"><span class="material-icons headerIcon">send</span></button>
        </div>
        <div id="goToDown" class="downDowny"><span class="material-icons" >arrow_downward</span></div>
    </div>

    <div class="settingsBar">

        <div class="headerSet">
            <div class="welcomeMess">
                <div class="img"><video src="https://res.cloudinary.com/duw2s4w0s/video/upload/v1620962563/HO%20TV%20assets/ezgif-6-38fc0e6aefa8_owq33f.mp4" alt="brainstorm video" alt="brainstorm video" autoplay></video></div>
                <h1 class="roomTitle">Error Pharsing</h1>
                <p id="copyLinker2">#4987720</p>
            </div>
        </div>

        <div class="membersSec">
            <h1>Members</h1>
            <ul id="membersList">
                <li class="membersCont"><div class="prof" style="background-color: #ffb26b;"><p>A</p></div></li>
            </ul>
        </div>
    </div>
</body>
    <script>
        var roomValue = "#4987720",
            userId = '1122334',
            myRoomJson;
        $('.roomTitle').text("It's BrainStorming")
        $('#roomNameInput').val("It's BrainStorming")
        $('.copyLinker2').text(roomValue)
        $("textarea").keydown(function(e){
            // Enter was pressed without shift key
            if (e.key == 'Enter' && !e.shiftKey)
            {
                sendT();
                e.preventDefault();
            }
        });

        $("#send").click(sendT);

        function sendT(){
            if($('.message').last().data("number") == userId){
                //showErrors('tips', 'Tips', 'Press Ctrl + Shift to make a new line!');
                $('.message .messArea').last().append('<div class="textM '+userId+' newMmess">'+$('#message').val()+'</div>')
                var goup = setTimeout(function(){
                    $('.message .messArea .textM').last().removeClass('newMmess');
                }, 10);
                $('#message').val('')
                goToBottom();
                findText()
            }
        }

        document.onload = goToBottom();

        var chatStatus = 1;
        $('.chatArea').on('scroll', function() {
            if($(this).scrollTop() + $(this).innerHeight() < $(this)[0].scrollHeight - $('.message').last().innerHeight() ) {
                newGoD()
            }
        })

        findText()

        function findText(){
            var message = document.querySelectorAll('.textM'),
                i ;
            for(i = 0; i < message.length; i++){
                message[i].innerHTML = linkify(message[i].textContent);
            }
        }
        var iaeou = 0;
        $("#settings").click(clickSetTrans);
        function clickSetTrans(){
            if(iaeou == 0){
                $('.settingsBar').addClass('clickSettingsBar')
                $('.changeW').addClass('clickSettingsCont')
                $('#settings').addClass('clickSettings');
                iaeou = 1;
            }else{
                $('.settingsBar').removeClass('clickSettingsBar')
                $('.changeW').removeClass('clickSettingsCont')
                $('#settings').removeClass('clickSettings');
                iaeou = 0;
            }
        }

        function linkify(text) {
            var urlRegex =/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
            return text.replace(urlRegex, function(url) {
                return '<a href="' + url + '" target="blank">' + url + "</a>";
            });
        }

        $("#message").on("input", function() {
            var textarea = document.querySelector("#message")
            enteredText = textarea.value;
            numberOfLineBreaks = (enteredText.match(/\n/g)||[]).length;
            characterCount = enteredText.length + numberOfLineBreaks;
            rowcount = numberOfLineBreaks + 1;
            if(rowcount < 4){
                $("#message").attr('rows', rowcount)
            }
        });

        function newGoD(){
            $("#goToDown").removeClass('downDowny')
        }

        $("#groupEdit").click(changeTitle);
        $("#titleFirst").click(changeTitle);

        function changeTitle(){
            var input = $('#roomNameInput'),
                regExp = /[a-zA-Z]/g;
            input.attr('style', 'display:block;')
            input.select();
            input.focusout(function(){
                if(input.val().trim().length > 5 && regExp.test(input.val().trim())){
                    $('.roomTitle').text(input.val())
                    input.attr('style', 'display:none;')
                }else{
                    showErrors('Invalid Name', 'In making your Room Name, you must enter 5 or more LETTERS.');
                    input.val($('.roomTitle')[0].innerHTML);
                    console.log('Room title must be over 5 LETTERS.')
                    input.attr('style', 'display:none;')
                }
            })
            input.keydown(function(e){
                // Enter was pressed without shift key
                if (e.key == 'Enter' && !e.shiftKey){
                    if(input.val().trim().length > 5 && regExp.test(input.val().trim())){
                        $('.roomTitle').text(input.val())
                        input.attr('style', 'display:none;')
                        e.preventDefault();
                    }else{
                        input.val($('.roomTitle')[0].innerHTML);
                        showErrors('error', 'Invalid Name', 'In making your Room Name, you must enter 5 or more LETTERS.');
                        console.log('Room title must be over 5 LETTERS.')
                        input.attr('style', 'display:none;')
                    }
                }
            });
        }

        function showErrors(type, title, details){
            if(type == 'error'){
                $('.errorsSide').append('<div class="bubble" id="errorBubble"><h1 class="erStatus"> <span class="material-icons">error</span>'+ title +'</h1><p class="erDetails">'+ details+'</p></div>');
            }
            if(type == 'tips'){
                $('.errorsSide').append('<div class="bubble" id="tipsBubble"><h1 class="erStatus"> <span class="material-icons">tips_and_updates</span>'+ title +'</h1><p class="erDetails">'+ details+'</p></div>');
            }
            $('.bubble').attr('style', 'display:block;');

            var start = setTimeout(function(){
                $('.bubble').addClass('bubbleAfter');
            }, 100);
            var end = setTimeout(function(){
                $('.bubble').first().removeClass('bubbleAfter');
                $('.bubble').first().addClass('bubbleGone');
            }, 5000);
            var deleteEl = setTimeout(function(){
                $('.bubble').first().remove();
            }, 5700)
        }

        $("#goToDown").click(function(){
            goToBottom();
        })

        function goToBottom(){
            $("#goToDown").addClass('downDowny');
            $('.chatArea').scrollTop($('.chatArea')[0].scrollHeight);
        }

        $("#linkCopy").click(function(){
            var timer = setTimeout(function(){
                $(".shareLink").addClass('showItem');
                $(".blackout").addClass('blackShow');
            }, 120);
            var timer2 = setTimeout(function(){
                $(".shareLink").attr('style', 'display: block');
                $(".blackout").attr('style', 'display: block');

            }, 100);

            $(".blackout").click(function(){
                    $(".shareLink").removeClass('showItem');
                    $(".blackout").removeClass('blackShow');
                    var timer2 = setTimeout(function(){
                        $(".shareLink").attr('style', 'display: none');
                        $(".blackout").attr('style', 'display: none');

                    }, 400);
                }
            )
            $("#copyLinker").click(function(){
                var dummy = document.querySelector("#copyvalue");
                dummy.select();
                document.execCommand("copy");
            })
        })
    </script>
</html>